<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>Upgrade your apps to Windows 8.1 – Tips and tricks | Tuan Tran's Blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/blog/atom.xml" title="Tuan Tran's Blog" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/blog/plugins/prettify/doxy.css"><script type="text/javascript" src="/blog/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">Tuan Tran's Blog</a></h1></div><p class="m-desc">Share to be shared</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/blog/archives/">Archives</a></li><li><span class="dot">●</span><a href="/blog/categories/">Categories</a></li><li><span class="dot">●</span><a href="/blog/tags/">Tags</a></li><li><span class="dot">●</span><a href="/blog/about/">About</a></li><li><span class="dot">●</span><a href="/blog/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="Search for" onfocus="if(this.value=='Search for'){this.value='';}" onblur="if(this.value==''){this.value='Search for';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">Upgrade your apps to Windows 8.1 – Tips and tricks</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/blog/2014/10/20/upgrade-your-apps-to-windows-8-1-tips-and-tricks/">2014-10-20</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/blog/categories/C/">C++</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/">c</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/Windows-Store-App/">Windows Store App</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><p>Vậy là Windows 8.1 ra mắt cũng đã lâu. Đối với các ứng dụng viết mới thì target mặc định của nó đã là Windows 8.1. Vậy đối với các ứng dụng cũ kỹ thì sao?</p>
<p>Microsoft cung cấp cho bạn một giải pháp, tuy chưa hoàn hảo, nhưng rất hữu ích. Bạn chỉ cần bấm và click.</p>
<a id="more"></a>
<h1 id="Retarget"><a href="#Retarget" class="headerlink" title="Retarget"></a>Retarget</h1><p>Để retarget ứng dụng từ windows 8 lên 8.1, rất đơn giản, chọn chuột phải vào Project, nhấn Retarget to Windows 8.1</p>
<p><img src="https://farm6.staticflickr.com/5597/14959569523_93a2eea021_o.png"></p>
<p>Một bảng nhỏ hiện ra, nói rằng bạn nên backup blah blah blah. Nếu bạn đang dùng version control như TFS, cách backup tốt nhất là check in trước khi retarget</p>
<p>Nhấn OK để Visual Studio tiến hành Retarget</p>
<p><img src="https://farm6.staticflickr.com/5615/15556047406_d430b4f604_o.png"></p>
<p>Khi bạn thấy cái bảng này là thành công….một nửa</p>
<p><img src="https://farm6.staticflickr.com/5604/15577095301_919a00e1f7_o.png"></p>
<h1 id="Fix-errors-and-Warning"><a href="#Fix-errors-and-Warning" class="headerlink" title="Fix errors and Warning"></a>Fix errors and Warning</h1><p>Như hình trên bạn cũng thấy, có nhiều Errors và Warning xuất hiện. Yên tâm, khi build thử project, bạn sẽ thấy còn nhiều errors hơn nữa</p>
<h2 id="Cac-errors-ve-References"><a href="#Cac-errors-ve-References" class="headerlink" title="Các errors về References"></a>Các errors về References</h2><p>Như hình trên, ứng dụng cũ dùng Microsoft Advertising SDK for Windows 8 (XAML) version 6.1. Bạn đã Upgrade lên 8.1, thì phải dùng SDK phiên bản mới hơn.</p>
<p>Right click Reference trong Project Folder, chọn Add Reference…</p>
<p><img src="https://farm4.staticflickr.com/3942/14959045524_c16f0ccea0_o.png"></p>
<p>Bỏ chọn các dòng bị mờ, và chọn dòng sáng rõ tương ứng. Như hình dưới đây. Xong rồi thì nhấn OK</p>
<p><img src="https://farm4.staticflickr.com/3938/15393674778_6d1b670903_o.png"></p>
<h2 id="Reinstall-Nuget-Package"><a href="#Reinstall-Nuget-Package" class="headerlink" title="Reinstall Nuget Package"></a>Reinstall Nuget Package</h2><p>Có một số Nuget Package chưa chịu target sang Windows 8.1. Mình sẽ target nó lại bằng cách…Reinstall</p>
<p>Mở Tool &gt; Nuget Package Manager &gt; Package Manager Console</p>
<p><img src="https://farm4.staticflickr.com/3951/15556131206_828262a120_o.png"></p>
<p>Có tùy chọn cho phép bạn Reinstall tất cả mọi nuget package, nhưng mà làm vậy thì hơi lâu. Bạn chỉ nên update một số package bị ảnh hưởng thôi. Tên Package bị ảnh hưởng nằm trong dòng thông báo lỗi</p>
<p>Gõ dòng lệnh sau vào. Đoạn cuối cùng là tên package</p>
<p><img src="https://farm4.staticflickr.com/3934/15580689642_679c2c614e_o.png"></p>
<p>Package Manager Console sẽ chạy, nhìn rất chuyên nghiệp :3</p>
<p>Chú ý: khi reinstall Google Analytics SDK, bạn sẽ thấy file bị conflict. Gõ N vô để nó bỏ qua không overwrite cái file này.</p>
<p><img src="https://farm4.staticflickr.com/3942/14959702053_fc3fe49d21_o.png"></p>
<p>Tiếp tục làm tương tự cho các package khác. Lần này, bạn chỉ cần gõ phím mũi tên để paste lại lệnh gần nhất. Edit cái tên package là xong</p>
<h2 id="Fix-warning-ve-Resource"><a href="#Fix-warning-ve-Resource" class="headerlink" title="Fix warning về Resource"></a>Fix warning về Resource</h2><p>Bạn nào làm app Multiple language sẽ gặp warning này. Lý do là method GetValue đã bị obsoleted, bạn cần phải nâng cấp một tí</p>
<p><img src="https://farm4.staticflickr.com/3939/15394661740_97dc995ef1_o.png"></p>
<p>Rất đơn giản. Thêm một dòng “ResourceContext.GetForCurrentView() làm tham số thứ 2 là xong</p>
<p><img src="https://farm6.staticflickr.com/5604/15577621901_91cf4673b5_o.png"></p>
<p>Đổi thành cái này</p>
<p><img src="https://farm6.staticflickr.com/5611/15394171128_99a5fc56b2_o.png"></p>
<h2 id="Fix-loi-querry-for-Windows-Size-directly"><a href="#Fix-loi-querry-for-Windows-Size-directly" class="headerlink" title="Fix lỗi querry for Windows Size directly"></a>Fix lỗi querry for Windows Size directly</h2><p>Ở windows 8.1, windows size đã có thể lấy trực tiếp ra ngoài. Vì vậy, dòng này trong Layout Aware Page bị lỗi thời.</p>
<p><img src="https://farm6.staticflickr.com/5607/15394693500_050c985474_o.png"></p>
<p>Sửa bằng cách ta sẽ sửa method DetermineVisualState</p>
<p>Chuột phải DetermineVisualState &gt; Go to Definition</p>
<p>Sửa lại như sau</p>
<p><code>protected virtual string DetermineVisualState() &#123; string visualState = &quot;FullScreenLandscape&quot;; var windowWidth = Window.Current.Bounds.Width; var windowHeight = Window.Current.Bounds.Height; if( windowWidth &lt;= 500 ) &#123; visualState = &quot;Snapped&quot; + &quot;_Detail&quot;; &#125; else if( windowWidth &lt;= 1366 ) &#123; if( windowWidth &lt; windowHeight ) &#123; visualState = &quot;FullScreenPortrait&quot; + &quot;_Detail&quot;; &#125; else &#123; visualState = &quot;FilledOrNarrow&quot;; &#125; &#125; return visualState; &#125;</code></p>
<p>Sau đó, thay thế method này với method cũ. Lưu ý method này không có tham số</p>
<p>Vậy là xong. Build lại, bạn sẽ thấy không còn lỗi nào :yay:</p>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">Author：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Tuan Tran</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">Link to this article：</span><span class="p-copytight-value"><a href="/blog/2014/10/20/upgrade-your-apps-to-windows-8-1-tips-and-tricks/">https://huntertran.github.io/blog/2014/10/20/upgrade-your-apps-to-windows-8-1-tips-and-tricks/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">Copyright：</span><span class="p-copytight-value">All rights reserved with<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>agreement. Include the source <a href="https://huntertran.github.io/blog">Tuan Tran's blog</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tags"></i><a href="/blog/tags/Visual-Studio/">Visual Studio</a><a href="/blog/tags/retarget/">retarget</a><a href="/blog/tags/upgrade/">upgrade</a><a href="/blog/tags/windows-8-1/">windows 8.1</a></span></div><aside id="toc"><div class="toc-title">Table of Contents</div><nav><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Retarget"><span class="toc-number">1.</span> <span class="toc-text">Retarget</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Fix-errors-and-Warning"><span class="toc-number">2.</span> <span class="toc-text">Fix errors and Warning</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Cac-errors-ve-References"><span class="toc-number">2.1.</span> <span class="toc-text">Các errors về References</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reinstall-Nuget-Package"><span class="toc-number">2.2.</span> <span class="toc-text">Reinstall Nuget Package</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fix-warning-ve-Resource"><span class="toc-number">2.3.</span> <span class="toc-text">Fix warning về Resource</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fix-loi-querry-for-Windows-Size-directly"><span class="toc-number">2.4.</span> <span class="toc-text">Fix lỗi querry for Windows Size directly</span></a></li></ol></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/blog/2014/11/14/fix-your-glitch-bluetooth-mouse/">&lt; Fix your glitch Bluetooth mouse</a><a class="next" href="/blog/2014/10/09/windows-phone-when-the-design-pallet-not-working/">[Windows Store] When the property window in Visual Studio not responding &gt;</a></div><div id="valine-comment"><style type="text/css">.night .v[data-class=v] a { color: #0F9FB4 !important; }
.night .v[data-class=v] a:hover { color: #216C73 !important; }
.night .v[data-class=v] li { list-style: inherit; }
.night .v[data-class=v] .vwrap { border: 1px solid #223441; border-radius: 0; }
.night .v[data-class=v] .vwrap:hover { box-shadow: 0 0 6px 1px #223441; }
.night .v[data-class=v] .vbtn { border-radius: 0; background: none; }
.night .v[data-class=v] .vlist .vcard .vh { border-bottom-color: #293D4E; }
.night .v[data-class=v] .vwrap .vheader .vinput { border-bottom-color: #223441; }
.night .v[data-class=v] .vwrap .vheader .vinput:focus { border-bottom-color: #339EB4; }
.night .v[data-class=v] code, .night .v[data-class=v] pre,.night .v[data-class=v] .vlist .vcard .vhead .vsys { background: #203240 !important; }
.night .v[data-class=v] code, .night .v[data-class=v] pre { color: #F0F0F0; font-size: 95%; }
.v[data-class=v] .vcards .vcard .vh {border-bottom-color: #223441; }
.night .v[data-class=v] .vcards .vcard .vcontent.expand:before {background: linear-gradient(180deg,rgba(38,57,73,.4),rgba(38,57,73,.9));}
.night .v[data-class=v] .vcards .vcard .vcontent.expand:after {background: rgba(38,57,73,.9)}
</style><div id="vcomment"></div><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'',
  appKey:'',
  lang: 'en',
  placeholder:'ヾﾉ≧∀≦)o Come on, say something...',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></section><footer><p>Copyright © 2016 - 2020 <a href="/blog/." rel="nofollow">Tuan Tran's Blog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/blog/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/blog/js/search.js"></script><script type="text/javascript" src="/blog/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.1" async></script></body></html>