<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>[ASP.NET] Mở rộng EditorFor | Tuan Tran's Blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/blog/atom.xml" title="Tuan Tran's Blog" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/blog/plugins/prettify/doxy.css"><script type="text/javascript" src="/blog/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">Tuan Tran's Blog</a></h1></div><p class="m-desc">Share to be shared</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/blog/archives/">Archives</a></li><li><span class="dot">●</span><a href="/blog/categories/">Categories</a></li><li><span class="dot">●</span><a href="/blog/tags/">Tags</a></li><li><span class="dot">●</span><a href="/blog/about/">About</a></li><li><span class="dot">●</span><a href="/blog/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="Search for" onfocus="if(this.value=='Search for'){this.value='';}" onblur="if(this.value==''){this.value='Search for';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">[ASP.NET] Mở rộng EditorFor</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/blog/2017/04/20/asp-net-mo-rong-editorfor/">2017-04-20</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/blog/categories/Others/">Others</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/">c</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/ASP-NET/">ASP.NET</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><p>Chắc là bạn đã quá quen với <strong><em>EditorFor</em></strong> control, nhưng nó chỉ render khi gặp những kiểu dữ liệu được hỗ trợ thôi. Bạn sẽ làm gì nếu muốn mở rộng EditorFor để render những kiểu dữ liệu của riêng bạn?</p>
<a id="more"></a>
<p>Mục lục</p>
<ul>
<li><p><a href="#1-s%E1%BB%AD-d%E1%BB%A5ng-editorfor-v%C3%A0-editorformodel">1. Sử dụng EditorFor và EditorForModel</a></p>
<ul>
<li><a href="#model-ho%E1%BA%B7c-viewmodel">Model (hoặc ViewModel)</a></li>
<li><a href="#view">View</a></li>
</ul>
</li>
<li><p><a href="#2-m%E1%BB%9F-r%E1%BB%99ng-editorfor">2. Mở rộng EditorFor</a></p>
<ul>
<li><a href="#21-t%E1%BA%A1o-editortemplates">2.1 Tạo EditorTemplates</a></li>
</ul>
</li>
</ul>
<p>Có thể nói EditorFor và EditorForModel là những control hữu ích nhất khi mà nó có thể render cái bụp toàn bộ thẻ input cần thiết dựa trên một model của bạn.</p>
<h1 id="1-Su-dung-EditorFor-va-EditorForModel"><a href="#1-Su-dung-EditorFor-va-EditorForModel" class="headerlink" title="1. Sử dụng EditorFor và EditorForModel"></a>1. Sử dụng EditorFor và EditorForModel</h1><p>Tại sao chả thấy ai nói gì về Editor: Từ hồi MVC2, Editor control đi kèm với phiên bản đầu tiên của MVC có thể được thay thế bởi EditorFor. Từ “For” ám chỉ đây là một <em>strongly typed html helper</em>, tức là bạn có thể chọn tên property từ model mà không sợ sai</p>
<h2 id="Model-hoac-ViewModel"><a href="#Model-hoac-ViewModel" class="headerlink" title="Model (hoặc ViewModel)"></a>Model (hoặc ViewModel)</h2><p>Để render 1 cái form, bạn cần phải biết data nó nhận vô là gì. Để hiển thị những data này, bạn cần phải tạo một class với các Properties</p>
<p>Model</p>
<p>[code lang=csharp] public class Lesson { // ScaffoldColumn mark that EditorFor should render it or not [ScaffoldColumn(false)] public int Id { get; set; }</p>
<p>// To display as label [Display(Name = “Lesson Name”)] public string Name { get; set; }</p>
<p>[Display(Name = “CD Number”)] public int CDNumber { get; set; }</p>
<p>[Display(Name = “CD Track”)] public int CDTrack { get; set; } } [/code]</p>
<p>ViewModel</p>
<p>[code lang=csharp] public class LessonViewModel { public Lesson LessonItem { get; set; } } [/code]</p>
<h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><ul>
<li>EditorFor control phải nằm bên trong form tag</li>
<li>Razor support bạn render cái form tag đó tự động luôn</li>
</ul>
<p>[code lang=csharp] @model LessonViewModel</p>
<p>@using(Html.BeginForm(“ActionName”,”ControllerName”, FormMethod.Post,new {@class = “myformclass”})) { @Html.EditorFor(x =&gt; x.LessonItem) } [/code]</p>
<p>Nếu bạn không có ViewModel, nhưng muốn render trực tiếp từ Lesson model</p>
<p>[code lang=csharp] @model Lesson</p>
<p>@using(Html.BeginForm(“ActionName”,”ControllerName”, FormMethod.Post,new {@class = “myformclass”})) { @Html.EditorForModel() } [/code]</p>
<h1 id="2-Mo-rong-EditorFor"><a href="#2-Mo-rong-EditorFor" class="headerlink" title="2. Mở rộng EditorFor"></a>2. Mở rộng EditorFor</h1><p>Tạo một class mới để giữ data</p>
<p>[code lang=csharp] public class TextBoxWithCheck { [Display(Name = “Fancy Text”)] public string MyText { get; set;}</p>
<p>public bool IsTrue { get; set; } } [/code]</p>
<p>Thêm cái class mới này vô Lesson model</p>
<p>[code lang=csharp] public TextBoxWithCheck FancyBox { get; set; } [/code]</p>
<p>Rồi giờ nếu bạn muốn một cái textbox có kèm checkbox giống vầy</p>
<p><img src="https://farm3.staticflickr.com/2897/33308184454_8240d60dd1_o.png" alt="textbox with checkbox"></p>
<p>Rõ ràng là chả có cái default control nào có thể làm được trò này, mà EditorFor cũng không biết chọn cái gì để render cái property “FancyBox” của kiểu “TextBoxWithCheck”.</p>
<p>Vì thế, bạn sẽ <strong><em>dạy</em></strong> nó cách render nhóe.</p>
<h2 id="2-1-Tao-EditorTemplates"><a href="#2-1-Tao-EditorTemplates" class="headerlink" title="2.1 Tạo EditorTemplates"></a>2.1 Tạo EditorTemplates</h2><ul>
<li>Tạo folder “EditorTemplates” trong Views &gt; Shared</li>
</ul>
<p><img src="https://farm3.staticflickr.com/2855/34151179025_3e849d7d2c_o.png" alt="folder structure"></p>
<ul>
<li>Thêm View mới vào folder đó, đặt tên là “TextBoxWithCheck.cshtml” (phải trùng tên với cái custom class)</li>
</ul>
<p>[code lang=html] @model TextBoxWithCheck</p>
<p>@Html.LabelFor(x =&gt; x.MyText) <div class="input-group"> @Html.TextAreaFor(x =&gt; x.Answer, new {@class=”form-control”}) <span class="input-group-addon"> @Html.CheckBoxFor(x =&gt; x.IsTrue) </span> </div> [/code]</p>
<p>Thế là xong. Giờ EditorFor đã biết render tất cả instance của TextBoxWithCheck.</p>
<p>Cũng dễ mà phải không?</p>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">Author：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Tuan Tran</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">Link to this article：</span><span class="p-copytight-value"><a href="/blog/2017/04/20/asp-net-mo-rong-editorfor/">https://huntertran.github.io/blog/2017/04/20/asp-net-mo-rong-editorfor/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">Copyright：</span><span class="p-copytight-value">All rights reserved with<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>agreement. Include the source <a href="https://huntertran.github.io/blog">Tuan Tran's blog</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tags"></i><a href="/blog/tags/custom/">custom</a><a href="/blog/tags/editorfor/">editorfor</a><a href="/blog/tags/extend/">extend</a><a href="/blog/tags/mo-rong/">mở rộng</a></span></div><aside id="toc"><div class="toc-title">Table of Contents</div><nav><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Su-dung-EditorFor-va-EditorForModel"><span class="toc-number">1.</span> <span class="toc-text">1. Sử dụng EditorFor và EditorForModel</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Model-hoac-ViewModel"><span class="toc-number">1.1.</span> <span class="toc-text">Model (hoặc ViewModel)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#View"><span class="toc-number">1.2.</span> <span class="toc-text">View</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Mo-rong-EditorFor"><span class="toc-number">2.</span> <span class="toc-text">2. Mở rộng EditorFor</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Tao-EditorTemplates"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Tạo EditorTemplates</span></a></li></ol></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/blog/2017/04/25/aspnet-editor-for-voi-list-va-them-moi-item-dung-ajax/">&lt; [ASPNET] Editor for với List và thêm mới item dùng AJAX</a><a class="next" href="/blog/2017/04/12/front-end-tu-dong-reload-browser-khi-dang-code/">[Front-end] Tự động reload browser khi đang code &gt;</a></div><div id="valine-comment"><style type="text/css">.night .v[data-class=v] a { color: #0F9FB4 !important; }
.night .v[data-class=v] a:hover { color: #216C73 !important; }
.night .v[data-class=v] li { list-style: inherit; }
.night .v[data-class=v] .vwrap { border: 1px solid #223441; border-radius: 0; }
.night .v[data-class=v] .vwrap:hover { box-shadow: 0 0 6px 1px #223441; }
.night .v[data-class=v] .vbtn { border-radius: 0; background: none; }
.night .v[data-class=v] .vlist .vcard .vh { border-bottom-color: #293D4E; }
.night .v[data-class=v] .vwrap .vheader .vinput { border-bottom-color: #223441; }
.night .v[data-class=v] .vwrap .vheader .vinput:focus { border-bottom-color: #339EB4; }
.night .v[data-class=v] code, .night .v[data-class=v] pre,.night .v[data-class=v] .vlist .vcard .vhead .vsys { background: #203240 !important; }
.night .v[data-class=v] code, .night .v[data-class=v] pre { color: #F0F0F0; font-size: 95%; }
.v[data-class=v] .vcards .vcard .vh {border-bottom-color: #223441; }
.night .v[data-class=v] .vcards .vcard .vcontent.expand:before {background: linear-gradient(180deg,rgba(38,57,73,.4),rgba(38,57,73,.9));}
.night .v[data-class=v] .vcards .vcard .vcontent.expand:after {background: rgba(38,57,73,.9)}
</style><div id="vcomment"></div><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'',
  appKey:'',
  lang: 'en',
  placeholder:'ヾﾉ≧∀≦)o Come on, say something...',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></section><footer><p>Copyright © 2016 - 2020 <a href="/blog/." rel="nofollow">Tuan Tran's Blog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/blog/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/blog/js/search.js"></script><script type="text/javascript" src="/blog/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.1" async></script></body></html>