<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>[ASP.NET Identity] - 1 - Introduction | Tuan Tran's Blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/blog/atom.xml" title="Tuan Tran's Blog" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/blog/plugins/prettify/doxy.css"><script type="text/javascript" src="/blog/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">Tuan Tran's Blog</a></h1></div><p class="m-desc">Share to be shared</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/blog/archives/">Archives</a></li><li><span class="dot">●</span><a href="/blog/categories/">Categories</a></li><li><span class="dot">●</span><a href="/blog/tags/">Tags</a></li><li><span class="dot">●</span><a href="/blog/about/">About</a></li><li><span class="dot">●</span><a href="/blog/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="Search for" onfocus="if(this.value=='Search for'){this.value='';}" onblur="if(this.value==''){this.value='Search for';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">[ASP.NET Identity] - 1 - Introduction</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/blog/2017/08/29/aspnet-identity-1-introduction/">2017-08-29</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/blog/categories/c/">c</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/ASP-NET/">ASP.NET</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><p>Một trong những thứ bí ẩn nhất khi làm web bằng ASP.NET là hệ thống ASP.NET Identity cũng do Microsoft phát triển. Với khá nhiều hardcode, kèm với nhiều yêu cầu phức tạp về users và roles, Identity phình to tới mức khó tin, và là một cục xương khó nhằn cho bất kỳ ai mới học ASP.NET</p>
<a id="more"></a>
<ul>
<li><p><a href="#1-qu%C3%A1-tr%C3%ACnh-ph%C3%A1t-tri%E1%BB%83n">1. Quá trình phát triển</a></p>
<ul>
<li><a href="#11-aspnet-membership">1.1. Asp.net Membership</a></li>
<li><a href="#12-aspnet-simple-membership">1.2. Asp.net Simple Membership</a></li>
<li><a href="#13-aspnet-universal-providers">1.3. ASP.NET Universal Providers</a></li>
<li><a href="#14-aspnet-identity">1.4. Asp.net Identity</a></li>
</ul>
</li>
<li><p><a href="#2-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-aspnet-identity">2. Bắt đầu với ASP.NET Identity</a></p>
</li>
<li><p><a href="#3-break-down">3. Break-down</a></p>
<ul>
<li><p><a href="#31-database">3.1. Database</a></p>
<ul>
<li><a href="#311-k%E1%BA%BFt-n%E1%BB%91i-t%E1%BB%9Bi-database">3.1.1. Kết nối tới database</a></li>
<li><a href="#312-code-first">3.1.2. Code first</a></li>
<li><a href="#313-c%E1%BA%A5u-tr%C3%BAc">3.1.3. Cấu trúc</a></li>
</ul>
</li>
<li><p><a href="#32-ki%E1%BA%BFn-tr%C3%BAc-v%C3%A0-c%C3%A1c-kh%C3%A1i-ni%E1%BB%87m">3.2. Kiến trúc và các khái niệm</a></p>
<ul>
<li><a href="#321-aspnetusers">3.2.1. AspNetUsers</a></li>
<li><a href="#322-aspnetuserlogins">3.2.2. AspNetUserLogins</a></li>
<li><a href="#323-aspnetuserclaims">3.2.3. AspNetUserClaims</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="1-Qua-trinh-phat-trien"><a href="#1-Qua-trinh-phat-trien" class="headerlink" title="1. Quá trình phát triển"></a>1. Quá trình phát triển</h1><h2 id="1-1-Asp-net-Membership"><a href="#1-1-Asp-net-Membership" class="headerlink" title="1.1. Asp.net Membership"></a>1.1. Asp.net Membership</h2><p>Hồi năm 2k hồi đó, có nhu cầu rõ rệt về websites phải có đăng nhập, đăng ký thành viên đồ các kiểu. MS thấy vậy nhảy vào và ASP.NET Membership ra đời</p>
<p>Version này cực kỳ hạn chế + DB được thiết kế cho SQL Server, và ko thể thay đổi + Tuy các provider được thiết kể để có thể thay đổi, nhưng mà hàng loạt hardcode + tư duy chắc chắn phải dùng SQL server của dev khiến việc thay đổi này vô cùng cực khổ + Ko xài được OWIN</p>
<h2 id="1-2-Asp-net-Simple-Membership"><a href="#1-2-Asp-net-Simple-Membership" class="headerlink" title="1.2. Asp.net Simple Membership"></a>1.2. Asp.net Simple Membership</h2><p>Sang tới 2k10, lúc này WebMatrix đang thịnh, MS cũng cho ra liền một bản rút gọn / nâng cấp của Membership, nhưng tóm lại vẫn quá nhiều vấn đề</p>
<h2 id="1-3-ASP-NET-Universal-Providers"><a href="#1-3-ASP-NET-Universal-Providers" class="headerlink" title="1.3. ASP.NET Universal Providers"></a>1.3. ASP.NET Universal Providers</h2><p>Tới hồi Azure ra đời, MS vẫn chưa chịu từ bỏ nền tảng Membership, cho ra mắt phiên bản Universal Providers (đặt tên sang choảnh)</p>
<p>Vì xài chung nền tảng kiến trúc, nên các lỗi lầm từ trước đó vẫn còn y nguyên</p>
<h2 id="1-4-Asp-net-Identity"><a href="#1-4-Asp-net-Identity" class="headerlink" title="1.4. Asp.net Identity"></a>1.4. Asp.net Identity</h2><p>Sau quá nhiều feedback, asp.net team cho ra đời version này, khắc phục mấy cái hạn chế trên kia.</p>
<ul>
<li>Có thể xài chung cho nhiều Framework (MVC, Forms, Web Pages, Web API, SingalR)</li>
<li>Dễ gắn thêm field vào user profile</li>
<li>Có thể gắn các Storage khác vô ngoài SQL Server (bớt đau khổ hơn tí)</li>
<li>Unit test được</li>
<li>Dùng claims (sẽ giải thích sau)</li>
<li>OWIN tốt</li>
<li>Support Azure Active Directory</li>
<li>Cài được bằng Nuget</li>
</ul>
<p>Bắt đầu nhảy vô nhé</p>
<h1 id="2-Bat-dau-voi-ASP-NET-Identity"><a href="#2-Bat-dau-voi-ASP-NET-Identity" class="headerlink" title="2. Bắt đầu với ASP.NET Identity"></a>2. Bắt đầu với ASP.NET Identity</h1><blockquote>
<p>Xem code ở đây: <a target="_blank" rel="noopener" href="https://github.com/cuoilennaocacban/ASP.NETIdentty2">ASP.NET Identity 2 clone on GitHub</a></p>
</blockquote>
<p>Để hiểu rõ hơn, bạn có thể tạo một Sample Project bằng ASP.NET, chọn Identity là Individual nhé File &gt; New &gt; Project…</p>
<p><img src="https://farm5.staticflickr.com/4408/36631193821_b2fea13a5c_o.png" alt="New Project"></p>
<p>Ngay khi tạo xong, bạn có thể nhấn chạy luôn</p>
<p><img src="https://farm5.staticflickr.com/4402/35961354023_95481c7d6a_o.png" alt="Run Project"></p>
<h1 id="3-Break-down"><a href="#3-Break-down" class="headerlink" title="3. Break-down"></a>3. Break-down</h1><p>Bây giờ mình sẽ tìm hiểu từng phần một của Identity nhé</p>
<h2 id="3-1-Database"><a href="#3-1-Database" class="headerlink" title="3.1. Database"></a>3.1. Database</h2><h3 id="3-1-1-Ket-noi-toi-database"><a href="#3-1-1-Ket-noi-toi-database" class="headerlink" title="3.1.1. Kết nối tới database"></a>3.1.1. Kết nối tới database</h3><p>Mặc định, Identity dùng connection string có tên “DefaultConnection” Mở <code>Models/IdentityModels</code></p>
<p>[code lang=csharp] public class ApplicationDbContext : IdentityDbContext<ApplicationUser> { public ApplicationDbContext() : base(“DefaultConnection”, throwIfV1Schema: false) { }</p>
<p>public static ApplicationDbContext Create() { return new ApplicationDbContext(); } } [/code]</p>
<p>Mở Web.config, kiếm <code>DefaultConnection</code>, bạn sẽ thấy connection string của nó nối tới Database</p>
<p>[code lang=xml] <connectionStrings> <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\\aspnet-LearnIdentity2-20170824112720.mdf;Initial Catalog=aspnet-LearnIdentity2-20170824112720;Integrated Security=True" providerName="System.Data.SqlClient" /> </connectionStrings> [/code]</p>
<p>Như vậy, Identity, tùy theo framework bạn sử dụng, sẽ dùng LocalDb hoặc SQL Server Dùng SQL Server Management Studio connect tới db này, bạn sẽ thấy nó đang nằm chình ình trong đó</p>
<p><img src="https://farm5.staticflickr.com/4337/36631439311_5da8d15c1a_o.png" alt="Database trong LocalDb"></p>
<p>Vậy bạn có tự hỏi làm sao mà mới chỉ chạy project thôi mà Identity đã tạo được database?</p>
<h3 id="3-1-2-Code-first"><a href="#3-1-2-Code-first" class="headerlink" title="3.1.2. Code first"></a>3.1.2. Code first</h3><p>Để trả lời cho câu hỏi đó, từ EF4, MS đã giới thiệu một hướng tiếp cận hoàn toàn mới gọi là Code first, bên cạnh hướng tiếp cận truyền thống là Database First như xưa nay. Với hướng tiếp cận này, Dev chỉ cần tập trung vào code của mình, db sẽ do EF tạo ra ứng với code của dev</p>
<p>Một flow cơ bản là Dev viết các model và class -&gt; Nhấn F5 -&gt; EF tạo / map database -&gt; Ứng dụng khởi chạy với datbase được tạo / map</p>
<h3 id="3-1-3-Cau-truc"><a href="#3-1-3-Cau-truc" class="headerlink" title="3.1.3. Cấu trúc"></a>3.1.3. Cấu trúc</h3><p>Identity tạo ra 5 bảng trong DB, và mỗi bảng đều liên hệ với nhau</p>
<p><img src="https://farm5.staticflickr.com/4381/35961946823_1e233cd9ef_o.png" alt="Db Structure"></p>
<p>Tất cả các trường Id đều dùng nvarchar(128), giá trị lưu trữ là code GUID</p>
<h2 id="3-2-Kien-truc-va-cac-khai-niem"><a href="#3-2-Kien-truc-va-cac-khai-niem" class="headerlink" title="3.2. Kiến trúc và các khái niệm"></a>3.2. Kiến trúc và các khái niệm</h2><h3 id="3-2-1-AspNetUsers"><a href="#3-2-1-AspNetUsers" class="headerlink" title="3.2.1. AspNetUsers"></a>3.2.1. AspNetUsers</h3><p><strong>PasswordHash</strong></p>
<p>Identity ko lưu trữ trực tiếp password theo dạng plain text (đề phòng trường hợp Db của bạn bị hack, hacker cũng ko biết password) <code>ASP.NETIdentty2/src/Microsoft.AspNet.Identity.Core/Crypto.cs</code></p>
<p>Identity Hash password của bạn dựa trên 1 chuỗi salt 128 bit. Nói chung về thuật toán mã hóa bạn cũng ko cần phải quan tâm :D</p>
<p>Trong Identity Core, thuật toán này có thay đổi, nên việc convert từ Identity 2 lên 3 sẽ cần configure lại đôi chút</p>
<p><strong>SecurityStamp</strong></p>
<p>Về cơ bản, SecurityStamp được dùng để xác thực một request nào đó. Giả sử như bạn đổi pass ở máy này, nhưng trên máy khác vẫn lưu cookie, thì ngay khi đổi pass xong, SecurityStamp thay đổi, cookie trên tất cả các máy khác sẽ mất hiệu lực</p>
<h3 id="3-2-2-AspNetUserLogins"><a href="#3-2-2-AspNetUserLogins" class="headerlink" title="3.2.2. AspNetUserLogins"></a>3.2.2. AspNetUserLogins</h3><p>Bảng này chịu trách nhiệm cho việc login bằng account của các dịch vụ thứ 3 như Google, Facebook, Twitter,…</p>
<p><strong>LoginProvider</strong></p>
<p>Là tên của Service được dùng để login (ví dụ “Facebook”, “Google”)</p>
<p><strong>ProviderKey</strong></p>
<p>Là một key ko trùng lặp do service cung cấp cho bạn, key này gắn liền với tài khoản của bạn tại service đó</p>
<p>Cả 3 field này kết hợp tạo thành khóa chính. Tức là 1 user có thể đăng nhập bằng nhiều dịch vụ khác nhau</p>
<p>Bảng này cho phép Identity dùng OWIN</p>
<h3 id="3-2-3-AspNetUserClaims"><a href="#3-2-3-AspNetUserClaims" class="headerlink" title="3.2.3. AspNetUserClaims"></a>3.2.3. AspNetUserClaims</h3><p><code>claim</code> là một hành vi mô mà một chủ thể nào đó tuyên bố điều gì đó về chính nó hoặc về các chủ thể khác.</p>
<blockquote>
<p>Ví dụ: User A claim rằng A có quyền xem hình</p>
</blockquote>
<p><strong><code>Claim-base Security</code></strong> Identity hỗ trợ 2 kiểu Security là Role-base Security và Claim-base Security. Về role-base security sẽ nói trong đoạn tiếp theo của bài blog này</p>
<p><strong>Một ví dụ thực tiễn</strong></p>
<p>Claim-base Security có mặt xung quanh chúng ta. Một ví dụ thực tiễn là khi bạn đi máy bay. Khi đi, bạn phải mang theo CMND/Passport + vé máy bay:</p>
<ol>
<li><code>Authentication</code>: Nhân viên kiểm soát sẽ kiểm tra khuôn mặt của bạn với CMND/Passport</li>
<li><code>Authorization</code>: Nhân viên kiểm tra vé của bạn xem có đúng là vé thiệt ko, ngồi ở hàng nào, ghế nào, sau cùng xuất ra cho bạn một tấm boarding passNhư vậy, tấm boarding pass này chứa khá nhiều thông tin: số chuyến bay, ghế ngồi, tên hành khách, và nhiều khi còn có thêm một dải băng từ màu đen ở mặt sau chứa mã số đã được mã hóa của tấm boarding pass đó nhằm chứng tỏ nó là một tấm boarding pass thiệt, ko phải đồ giả. Tấm boarding pass này chính là 1 tập hợp các <code>claim</code>, được xuất ra bởi một <code>issuer</code>. Khi bạn tới sân bay, trình các <code>claim</code> này ra, nhân viên sẽ đơn giản đối chiếu các claim này với database và cho bạn lên máy bay. Cũng cần lưu ý là tấm boarding pass này có thể được xuất bởi nhiều nguồn: trực tiếp tại quầy làm thủ tục, hay đại lý vé máy bay. Những nguồn này gọi là <code>issuer</code> Trong phần mềm, tập hợp các claim này gọi là <code>security token</code>. Mỗi security token được ký bởi một <code>issuer</code> đã tạo ra nó. Một ứng dụng có <code>claim-base security</code> yêu cầu user phải xác thực tài khoản của mình, và tùy vào các claim mà họ có để cấp các quyền cần thiết.</li>
</ol>
<p><strong>Role-base Security</strong></p>
<p>Ngoài claim, Identity còn cung cấp cho bạn một Role-base Security nữa</p>
<p>Role thì dễ hiểu rồi. Một user có thể được thêm vào nhiều role, và mỗi role sẽ cho user đó một số quyền hạn nhất định</p>
<p>Trong bài viết tiếp theo, chúng ta sẽ cùng đi vào tìm hiểu về code của ASP.NET Identity nhé</p>
<blockquote>
<p>Xem code ở đây: <a target="_blank" rel="noopener" href="https://github.com/cuoilennaocacban/ASP.NETIdentty2">ASP.NET Identity 2 clone on GitHub</a></p>
</blockquote>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">Author：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Tuan Tran</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">Link to this article：</span><span class="p-copytight-value"><a href="/blog/2017/08/29/aspnet-identity-1-introduction/">https://huntertran.github.io/blog/2017/08/29/aspnet-identity-1-introduction/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">Copyright：</span><span class="p-copytight-value">All rights reserved with<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>agreement. Include the source <a href="https://huntertran.github.io/blog">Tuan Tran's blog</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tag"></i><a href="/blog/tags/identity/">identity</a></span></div><aside id="toc"><div class="toc-title">Table of Contents</div><nav><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Qua-trinh-phat-trien"><span class="toc-number">1.</span> <span class="toc-text">1. Quá trình phát triển</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Asp-net-Membership"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. Asp.net Membership</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Asp-net-Simple-Membership"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. Asp.net Simple Membership</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-ASP-NET-Universal-Providers"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. ASP.NET Universal Providers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-Asp-net-Identity"><span class="toc-number">1.4.</span> <span class="toc-text">1.4. Asp.net Identity</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Bat-dau-voi-ASP-NET-Identity"><span class="toc-number">2.</span> <span class="toc-text">2. Bắt đầu với ASP.NET Identity</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Break-down"><span class="toc-number">3.</span> <span class="toc-text">3. Break-down</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Database"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. Database</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-Ket-noi-toi-database"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1. Kết nối tới database</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-Code-first"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2. Code first</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-Cau-truc"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.1.3. Cấu trúc</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Kien-truc-va-cac-khai-niem"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. Kiến trúc và các khái niệm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-AspNetUsers"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1. AspNetUsers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-AspNetUserLogins"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2. AspNetUserLogins</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-AspNetUserClaims"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3. AspNetUserClaims</span></a></li></ol></li></ol></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/blog/2017/12/10/asp-net-core-2-0-dung-vscode-va-target-net-framework/">&lt; [ASP.NET Core 2.0] - dùng VSCode và target .NET Framework</a><a class="next" href="/blog/2017/08/02/wordpress-install-wordpress-to-docker-containers-from-windows/">Wordpress - Install Wordpress to Docker containers from Windows &gt;</a></div><div id="valine-comment"><style type="text/css">.night .v[data-class=v] a { color: #0F9FB4 !important; }
.night .v[data-class=v] a:hover { color: #216C73 !important; }
.night .v[data-class=v] li { list-style: inherit; }
.night .v[data-class=v] .vwrap { border: 1px solid #223441; border-radius: 0; }
.night .v[data-class=v] .vwrap:hover { box-shadow: 0 0 6px 1px #223441; }
.night .v[data-class=v] .vbtn { border-radius: 0; background: none; }
.night .v[data-class=v] .vlist .vcard .vh { border-bottom-color: #293D4E; }
.night .v[data-class=v] .vwrap .vheader .vinput { border-bottom-color: #223441; }
.night .v[data-class=v] .vwrap .vheader .vinput:focus { border-bottom-color: #339EB4; }
.night .v[data-class=v] code, .night .v[data-class=v] pre,.night .v[data-class=v] .vlist .vcard .vhead .vsys { background: #203240 !important; }
.night .v[data-class=v] code, .night .v[data-class=v] pre { color: #F0F0F0; font-size: 95%; }
.v[data-class=v] .vcards .vcard .vh {border-bottom-color: #223441; }
.night .v[data-class=v] .vcards .vcard .vcontent.expand:before {background: linear-gradient(180deg,rgba(38,57,73,.4),rgba(38,57,73,.9));}
.night .v[data-class=v] .vcards .vcard .vcontent.expand:after {background: rgba(38,57,73,.9)}
</style><div id="vcomment"></div><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'',
  appKey:'',
  lang: 'en',
  placeholder:'ヾﾉ≧∀≦)o Come on, say something...',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></section><footer><p>Copyright © 2016 - 2020 <a href="/blog/." rel="nofollow">Tuan Tran's Blog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/blog/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/blog/js/search.js"></script><script type="text/javascript" src="/blog/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.1" async></script></body></html>