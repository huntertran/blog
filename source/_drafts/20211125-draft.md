---
title: Architectural Styles là gì - Các Architectural Styles phổ biến
date: 2021-11-25 02:39:54
tags:
---

Disclaimer: bài viết có sử dụng nhiều thuật ngữ tiếng anh. Các thím học CNTT, IT thì nên làm quen với các thuật ngữ tiếng anh vì tài liệu tiếng Việt cho ngành này rất ít hoặc rất cũ.

# Dẫn nhập

Được sự bảo đảm của mod @Fire Of Heart, với hôm nay tôi mới present ở conference xong nên cũng rảnh, thế là tôi tiếp tục viết tiếp bài này. Kiến thức này tôi học được trong một course level graduate ở Canada.

Chắc hẳn các thím cũng biết kiến trúc monolith và kiến trúc microservice. Vậy còn các dạng kiến trúc nào khác? Dạng tổng quát của các kiến trúc này là gì? Các câu hỏi đó sẽ được trả lời trong bài viết hôm nay.

# Architectural Style là gì

## Architectural design

Trước tiên, để hiểu `Architectural Style` là gì, các thím phải biết `architectural design`.

Vào năm 1997, Monroe, Robert T., et al. trong bài báo "Architectural styles, design patterns, and objects." IEEE software 14.1 (1997): 43-52. đã đưa ra khái niệm `Architectural Design` như sau (khúc này khó dịch vl, nên tôi chỉ dịch thoát nghĩa thôi nhé):

* Một architectural design phục vụ 2 mục đích:
    * Cung cấp 1 cái nhìn tổng quan, trừu tượng về hệ thống. Nó ẩn đi các implementation, và lôi ra ngoài những gì cơ bản nhất của hệ thống.
    * Cung cấp 1 cấu trúc cơ bản của hệ thống cho mọi người biết. Dựa vào cấu trúc này, các thím có thể thay thế, bổ sung, thêm thắt tính năng nhưng vẫn đảm bảo tính chất của hệ thống ban đầu.

## Architectural Style

Các vozer là một loài động vật có tính học hỏi cao. Nên câu hỏi đặt ra là làm thế nào để tổng quát hóa các architectural design và dùng nó phát triển các hệ thống mới khác.

Các thím junior có thể chưa đụng tới phần này, nhưng các thím sen nho chắc là có gặp 1 vài lần sếp kêu dev cho tôi tính năng a b c from scratch, hoặc build luôn nguyên cái system mới. Các architectural design các thím biết thường là đã được customize để phù hợp với bussiness của 1 project đặc thù nào đó, nên hơi khó để apply nó vào 1 hệ thống khác, cho dù nó có cùng tính năng chính đi chăng nữa.

Các researcher từ năm 1997 đã có cùng câu hỏi với các thím, và thế là, Architectural Style ra đời.

## Architectural Style và Design Pattern

Object Oriented Design gặp khó khăn trong việc:
* Mô tả 1 nhóm các object interact với nhau như nào
* Mô tả và đóng gói 1 nhóm các object với nhau để xài đi xài lại.

Để phần nào giải quyết các hạn chế này, design pattern ra đời.

Architectural Style cũng có thể coi là 1 dạng pattern. Tuy nhiên, trong khi design pattern giải quyết 1 bài toán cụ thể, architectural style lại cung cấp cho các thím 1 cái nền tảng, hoặc nói theo một cách khác, 1 dạng hướng dẫn, để các thím có thể thiết kế hệ thống của mình.

# Các dạng Architectural Style

1. Structure

Component-based (*)
Monolithic application
Layered (*)
Pipes and filters (*)

2. Shared memory

Database-centric
Blackboard
Rule-based

3. Messaging

Event-driven aka implicit invocation
Publish-subscribe
Asynchronous messaging

4. Adaptive System

Plug-ins
Microkernel
Reflection
Domain specific languages

5. Distributed systems

Client-server (multitier architecture exhibits this style)
Shared nothing architecture
Space-based architecture
Object request broker
Peer-to-peer
Representational state transfer (REST)
Service-oriented
Cloud computing patterns

Tôi sẽ giải thích những cái có dấu * nhé. Những cái còn lại các thím có thể tham khảo wiki: https://en.wikipedia.org/wiki/List_of_software_architecture_styles_and_patterns

# Các Architectural Style phổ biến

## Component-based

Dù cái tên hơi khó hiểu, nhưng đây là architectural style phổ biến nhất, đơn giản nhất. Các thím xài hằng ngày mà ko nhận ra.

Nguyên tắc cơ bản của nó là "Separation of Concern". Những thứ có chung 1 mục đích thì được nhét chung với nhau.

Ví dụ:

Component Checkout đòi component CardProcessing xử lý card của client

```
,--------------.
|CardProcessing|
`--------------'
        |       
        |       
   ,--------.   
   |Checkout|   
   `--------'   
```

Việc tách thành các component khác nhau này giúp các thím dễ dàng thay đổi khi cần. Ví dụ như CardProcessing chẳng hạn, các thím có thể đổi nó từ chỉ process debit card thành 1 component có khả năng process credit, debit và ATM card mà ko cần phải đập đi xây lại cả hệ thống checkout.

Cái này cũng giúp ích trong việc tìm và debug, dễ test hơn, dễ chia task hơn, vân vân và mây mây.

## Layered architecture

Ý như tên. Architectural style này mô tả cách sắp xếp hệ thống theo dạng từng lớp từng lớp. Các thím có thể tưởng tượng nó giống củ hành tây. Để đến được lớp trong cùng, các thím phải bóc từng lớp một.

Layered Architecture cũng vậy, các thím phải đi qua từng layer một để access vào layer thấp nhất. Mỗi layer chỉ giao tiếp với layer ngay kế nó mà thôi.

Một ví dụ điển hình cho architectural style này trong thực tế là cấu trúc 1 package TCP, gồm 7 layers:

https://i.imgur.com/Gdqz22g.png

Một ví dụ khác, nếu các thím có xài VPN hay proxy, thì cấu trúc trừu tượng của hệ thống VPN hay proxy cũng là 1 dạng layered architecture, trong đó máy của các thím nằm ở tầng thấp nhất. Còn các VPN/Proxy server nằm ở các tầng cao hơn. ISP khi đọc gói tin được truyền qua VPN/Proxy thì chỉ đọc được các layer trên cao, mà ko biết các thím có đang coi pỏn húp hay ko là vậy.

## Pipes and Filters

Để hình dung 1 cách dễ hiểu cái architectural style này, các thím hãy tưởng tượng nó giống như mấy cái đường ống cấp nước nhà thím vậy.

Với tình hình nước máy ở VN dơ vl, nên các thím phải lắp máy lọc nước Kanguroo hàng đầu VN ở nhà phải ko? Cái mô tả của architectural style này nó y chang như vậy.

Ở mỗi một filter, nước (data) của các thím sẽ được xử lý (tính toán) để loại bỏ/thêm thắt cái gì đó, trước khi nó tiếp tục đi trong đường ống tới cái filter tiếp theo, và cuối cùng là tới consumer.

https://i.imgur.com/Woe5p6r.png

hình chôm của MS ở đây: https://docs.microsoft.com/en-us/azure/architecture/patterns/pipes-and-filters

Một ví dụ cho architectural styles này, nếu thím nào làm .net core, sẽ biết từ .net core, MS đã thay thế cơ chế handlers = middlewares. Các middleware này được thiết kế như các filter để xử lý requests/responses trước khi nó được đưa vào controller.

Thôi hôm nay tới đây thôi nhé.