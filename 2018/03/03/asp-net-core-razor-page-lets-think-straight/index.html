<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>[ASP.NET Core] - Razor Page - Let's think straight | Tuan Tran's Blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/blog/atom.xml" title="Tuan Tran's Blog" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/blog/plugins/prettify/doxy.css"><script type="text/javascript" src="/blog/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">Tuan Tran's Blog</a></h1></div><p class="m-desc">Share to be shared</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/blog/archives/">Archives</a></li><li><span class="dot">●</span><a href="/blog/categories/">Categories</a></li><li><span class="dot">●</span><a href="/blog/tags/">Tags</a></li><li><span class="dot">●</span><a href="/blog/about/">About</a></li><li><span class="dot">●</span><a href="/blog/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="Search for" onfocus="if(this.value=='Search for'){this.value='';}" onblur="if(this.value==''){this.value='Search for';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">[ASP.NET Core] - Razor Page - Let's think straight</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/blog/2018/03/03/asp-net-core-razor-page-lets-think-straight/">2018-03-03</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/blog/categories/C/">C#</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/">c</a>&nbsp;&bull;&nbsp;<a href="/blog/categories/c/ASP-NET/">ASP.NET</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><p>Khi bạn cần tạo thật nhanh một cái website có các page cần thiết mà không cần phải quan tâm tới các vấn đề phức tạp như mô hình, bảo mật, mở rộng, thì Razor Page chính là câu trả lời</p>
<a id="more"></a>
<ul>
<li><p><a href="#1-y%C3%AAu-c%E1%BA%A7u">1. Yêu cầu</a></p>
</li>
<li><p><a href="#2-m%C3%B4-h%C3%ACnh-ph%C3%A1t-tri%E1%BB%83n">2. Mô hình phát triển</a></p>
</li>
<li><p><a href="#3-c%C3%A1c-v%E1%BA%A5n-%C4%91%E1%BB%81-c%E1%BB%A7a-mvc">3. Các vấn đề của MVC</a></p>
<ul>
<li><a href="#31-fat-controller">3.1. Fat Controller</a></li>
<li><a href="#32-chia-c%E1%BA%A5p">3.2. Chia cấp</a></li>
<li><a href="#33-duplicate">3.3. Duplicate</a></li>
</ul>
</li>
<li><p><a href="#4-razor-page-coding-conventions">4. Razor Page Coding conventions</a></p>
</li>
<li><p><a href="#5-the-future-is-now">5. The future is now?</a></p>
</li>
</ul>
<h1 id="1-Yeu-cau"><a href="#1-Yeu-cau" class="headerlink" title="1. Yêu cầu"></a>1. Yêu cầu</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.microsoft.com/net/download">.NET Core 2.0 trở lên</a></li>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/">Visual Studio Code</a></li>
<li>Đọc sơ qua về <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/aspnet/core/mvc/razor-pages/?tabs=visual-studio">Razor Page</a></li>
</ul>
<h1 id="2-Mo-hinh-phat-trien"><a href="#2-Mo-hinh-phat-trien" class="headerlink" title="2. Mô hình phát triển"></a>2. Mô hình phát triển</h1><p>Nếu bạn đã là một chiến binh ASP.NET lâu năm, thì chắc hẳn bạn sẽ quen thuộc với mô hình MVC, viết tắt cho Model-View-Controller. Ở Razor Page, bạn sẽ làm quen với một mô hình hoàn toàn mới và vô cùng đơn giản (đơn giản tới mức ko có gì để học luôn)</p>
<p><strong>Mô hình MVC</strong></p>
<p><img src="https://farm1.staticflickr.com/794/39482986360_fe3ba6ff76_o.png" alt="mvc pattern"></p>
<blockquote>
<p>Nếu bạn muốn làm quen với mô hình MVC, có thể đọc bài viết <a target="_blank" rel="noopener" href="https://coding4food.net/2018/03/04/asp-net-for-beginner-part-1-mvc/">[ASP.NET for Beginner] – Part 1 – MVC</a></p>
</blockquote>
<p><strong>‘Mô hình’ Razor Page</strong></p>
<p><img src="https://farm1.staticflickr.com/822/40395935845_bdb4073f2f_o.png" alt="razor page pattern"></p>
<h1 id="3-Cac-van-de-cua-MVC"><a href="#3-Cac-van-de-cua-MVC" class="headerlink" title="3. Các vấn đề của MVC"></a>3. Các vấn đề của MVC</h1><h2 id="3-1-Fat-Controller"><a href="#3-1-Fat-Controller" class="headerlink" title="3.1. Fat Controller"></a>3.1. Fat Controller</h2><p>Giả sử bạn có một controller xử lý các tác vụ liên quan tới giao dịch chuyển tiền giữa các tài khoản, tạm gọi là <code>TransactionController</code></p>
<p>Có 4 thao tác cơ bản đối với 1 dòng dữ liệu: Create-Read-Update-Delete, tới đây thì ok không vấn đề gì</p>
<p>Pặc, bạn muốn xử lý thêm việc nạp thẻ điện thoại, chi trả hóa đơn điện, nước, internet =&gt; thêm các phương thức như <code>NapTheCao</code>, <code>TraTienDien</code>, <code>TraTienNuoc</code>, <code>TraTienInternet</code>. 2 tuần sau, bạn lại muốn thêm vài tính năng khác, tất cả đều liên quan tới transaction.</p>
<p>Càng về sau, <code>TransactionController</code> càng dài, và nó đã chính thức được gọi tên là Fat Controller.</p>
<h2 id="3-2-Chia-cap"><a href="#3-2-Chia-cap" class="headerlink" title="3.2. Chia cấp"></a>3.2. Chia cấp</h2><p>Mô hình MVC cho bạn một folder tên <code>Controllers</code> để chứa tất cả các controller của bạn. Điều này sd4 tương ứng với 1 cấp địa chỉ trên URL</p>
<p>Với ví dụ transaction phía trên, URL của bạn sẽ có dạng: <code>domain/transaction/create</code></p>
<p>Nếu bạn muốn 1 cấp sâu hơn, ví dụ như <code>domain/transaction/phones/create</code> thì sao? Bạn phải hoặc customize lại route, hoặc tạo một <code>Area</code> tên <code>Transaction</code>, và tách các function liên quan với nhau thành từng controller khác nhau.</p>
<h2 id="3-3-Duplicate"><a href="#3-3-Duplicate" class="headerlink" title="3.3. Duplicate"></a>3.3. Duplicate</h2><p>Đối với một form bất kỳ, trong mô hình mvc luôn phải có 2 action tương ứng với 2 hành động là Get và post, và người ta thường đặt tên 2 action này giống nhau cho dễ phân biệt với các tính năng khác trong cùng một controller. Điều này đôi khi gây ra những bất tiện nhất định, và bạn bắt buộc phải khai báo attribute <code>[HttpGet]</code> và <code>[HttpPost]</code></p>
<h1 id="4-Razor-Page-Coding-conventions"><a href="#4-Razor-Page-Coding-conventions" class="headerlink" title="4. Razor Page Coding conventions"></a>4. Razor Page Coding conventions</h1><p>Tương tự như MVC, Razor Page cũng có một số coding conventions</p>
<p>Conventions</p>
<p>MVC</p>
<p>RAZOR PAGES</p>
<p>Default View</p>
<p>Index.cshtml</p>
<p>Index.cshtml</p>
<p>return default view</p>
<p>return View();</p>
<p>return Page();</p>
<p>Http Verbs</p>
<p>[HttpGet]<br>[HttpPost]</p>
<p>OnGet();<br>OnPost();</p>
<p>Bind dữ liệu</p>
<p>ViewModel</p>
<p>[BindProperty]</p>
<p>Generate Link</p>
<p>Url.Action(…)</p>
<p>Url.Page(…)</p>
<p>multiple action for form submit</p>
<p>Not built-in</p>
<p>asp-page-handler=“TestHandler”<br>OnTestHandler()</p>
<h1 id="5-The-future-is-now"><a href="#5-The-future-is-now" class="headerlink" title="5. The future is now?"></a>5. The future is now?</h1><p>Razor Page, theo đánh giá của mình, chỉ phù hợp với các project vừa và nhỏ, với các view đơn giản về mật logic.</p>
<p>Tại phiên bản .NET CORE 2.0, Razor Page vẫn chưa hỗ trợ một số tính năng mà MVC đang có như sau</p>
<ul>
<li>IActionFilter</li>
<li>Output Cache</li>
<li>IgnoreAntiforgeryToken attribute (bạn có thể tham khảo thêm tại <a target="_blank" rel="noopener" href="https://github.com/aspnet/Mvc/issues/7012">github issue này</a> để biết cách tắt <strong>toàn bộ</strong>)</li>
</ul>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">Author：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Tuan Tran</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">Link to this article：</span><span class="p-copytight-value"><a href="/blog/2018/03/03/asp-net-core-razor-page-lets-think-straight/">https://huntertran.github.io/blog/2018/03/03/asp-net-core-razor-page-lets-think-straight/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">Copyright：</span><span class="p-copytight-value">All rights reserved with<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>agreement. Include the source <a href="https://huntertran.github.io/blog">Tuan Tran's blog</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tags"></i><a href="/blog/tags/page/">page</a><a href="/blog/tags/razor/">razor</a></span></div><aside id="toc"><div class="toc-title">Table of Contents</div><nav><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Yeu-cau"><span class="toc-number">1.</span> <span class="toc-text">1. Yêu cầu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Mo-hinh-phat-trien"><span class="toc-number">2.</span> <span class="toc-text">2. Mô hình phát triển</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Cac-van-de-cua-MVC"><span class="toc-number">3.</span> <span class="toc-text">3. Các vấn đề của MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Fat-Controller"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. Fat Controller</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Chia-cap"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. Chia cấp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-Duplicate"><span class="toc-number">3.3.</span> <span class="toc-text">3.3. Duplicate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Razor-Page-Coding-conventions"><span class="toc-number">4.</span> <span class="toc-text">4. Razor Page Coding conventions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-The-future-is-now"><span class="toc-number">5.</span> <span class="toc-text">5. The future is now?</span></a></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/blog/2018/03/04/asp-net-for-beginner-part-1-mvc/">&lt; [ASP.NET for Beginner] - Part 1 - MVC</a><a class="next" href="/blog/2018/03/03/asp-net-core-auto-anti-forgery-token/">[ASP.NET Core] Auto Anti-forgery Token &gt;</a></div><div id="valine-comment"><style type="text/css">.night .v[data-class=v] a { color: #0F9FB4 !important; }
.night .v[data-class=v] a:hover { color: #216C73 !important; }
.night .v[data-class=v] li { list-style: inherit; }
.night .v[data-class=v] .vwrap { border: 1px solid #223441; border-radius: 0; }
.night .v[data-class=v] .vwrap:hover { box-shadow: 0 0 6px 1px #223441; }
.night .v[data-class=v] .vbtn { border-radius: 0; background: none; }
.night .v[data-class=v] .vlist .vcard .vh { border-bottom-color: #293D4E; }
.night .v[data-class=v] .vwrap .vheader .vinput { border-bottom-color: #223441; }
.night .v[data-class=v] .vwrap .vheader .vinput:focus { border-bottom-color: #339EB4; }
.night .v[data-class=v] code, .night .v[data-class=v] pre,.night .v[data-class=v] .vlist .vcard .vhead .vsys { background: #203240 !important; }
.night .v[data-class=v] code, .night .v[data-class=v] pre { color: #F0F0F0; font-size: 95%; }
.v[data-class=v] .vcards .vcard .vh {border-bottom-color: #223441; }
.night .v[data-class=v] .vcards .vcard .vcontent.expand:before {background: linear-gradient(180deg,rgba(38,57,73,.4),rgba(38,57,73,.9));}
.night .v[data-class=v] .vcards .vcard .vcontent.expand:after {background: rgba(38,57,73,.9)}
</style><div id="vcomment"></div><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'',
  appKey:'',
  lang: 'en',
  placeholder:'ヾﾉ≧∀≦)o Come on, say something...',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></section><footer><p>Copyright © 2016 - 2020 <a href="/blog/." rel="nofollow">Tuan Tran's Blog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/blog/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/blog/js/search.js"></script><script type="text/javascript" src="/blog/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.1" async></script></body></html>